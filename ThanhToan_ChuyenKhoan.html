<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./assets/boostrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="./assets/css/reset.css">
    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="./assets/css/ChuyenKhoan.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@100..800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
        integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <div class="transfer-container">
        
        <div class="transfer-header">
            <div class="icon">
                <i class="fas fa-university"></i>
            </div>
            <h2 id="page-title">Chọn Ngân hàng</h2>
            <p id="page-subtitle">Vui lòng chọn ngân hàng bạn muốn chuyển đến</p>
        </div>

        <div class="transfer-body">
            
            <div id="bank-selection">
                <div class="bank-grid">
                    <div class="bank-option" onclick="selectBank('vietcombank')">
                        <img src="./assets/img/Logo Vietcombank.png" alt="Vietcombank">
                    </div>
                    <div class="bank-option" onclick="selectBank('techcombank')">
                        <img src="./assets/img/logoTechcombank.png" alt="Techcombank">
                    </div>
                    <div class="bank-option" onclick="selectBank('bidv')">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/Logo_BIDV.svg/1200px-Logo_BIDV.svg.png" alt="BIDV">
                    </div>
                    <div class="bank-option" onclick="selectBank('agribank')">
                        <img src="./assets/img/Logo Agribank V.png" alt="Agribank">
                    </div>
                    <div class="bank-option" onclick="selectBank('mbbank')">
                        <img src="./assets/img/logoMB.png" alt="MB Bank">
                    </div>
                    <div class="bank-option" onclick="selectBank('acb')">
                        <img src="./assets/img/Logo ACB.png" alt="ACB">
                    </div>
                </div>
            </div>
            
            <div id="bank-details">
                <a class="back-to-selection" onclick="goBackToSelection()">
                    <i class="fas fa-arrow-left"></i>
                    Quay lại chọn ngân hàng
                </a>

                <img src="" alt="Mã QR Chuyển khoản" class="qr-code" id="qr-code-img">
            
                <ul class="account-details">
                    <li>
                        <span class="label">Ngân hàng:</span>
                        <span class="value" id="detail-bank-name"></span>
                    </li>
                    <li>
                        <span class="label">Số tài khoản:</span>
                        <span class="value">
                            <span id="detail-stk"></span>
                            <button class="copy-btn" onclick="copyToClipboard('detail-stk', 'Số tài khoản')">
                                <i class="fas fa-copy"></i>
                            </button>
                        </span>
                    </li>
                    <li>
                        <span class="label">Chủ tài khoản:</span>
                        <span class="value" id="detail-name"></span>
                    </li>
                    <hr style="border: 0; border-top: 1px solid #f0f0f0; margin: 0;">
                    <li>
                        <span class="label">Số tiền:</span>
                        <span class="value amount" id="detail-amount">1.500.000 VNĐ</span>
                    </li>
                    <li style="align-items: flex-start;">
                        <span class="label">Nội dung:</span>
                        <span class="value content">
                            <span id="detail-content">TT PHONG001 123456</span>
                            <button class="copy-btn" onclick="copyToClipboard('detail-content', 'Nội dung')">
                                <i class="fas fa-copy"></i>
                            </button>
                        </span>
                    </li>
                </ul>
            </div>

        </div>

        <div class="transfer-footer">
            <form action="XacNhanThanhToanServlet" method="POST" id="confirm-form">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-check-circle"></i>
                    Tôi đã hoàn tất chuyển khoản
                </button>
            </form>
            <a href="thanhToan.jsp" class="btn btn-secondary">
                <i class="fas fa-times-circle"></i>
                Hủy giao dịch
            </a>
        </div>
    </div>

    <script>
        // --- JAVASCRIPT ĐỂ XỬ LÝ VIỆC CHỌN NGÂN HÀNG ---

        // 1. Dữ liệu ngân hàng của chủ trọ (Mẫu)
        // Trong JSP thật, bạn có thể truyền dữ liệu này từ Servlet
        const bankData = {
            'vietcombank': {
                name: 'Vietcombank (VCB)',
                stk: ')829028846',
                owner: 'HOANG MINH THANG',
                qrUrl: 'https://img.vietqr.io/image/VCB-0829028846-compact.png'
            },
            'techcombank': {
                name: 'Techcombank (TCB)',
                stk: '0829028846',
                owner: 'HOANG MINH THANG',
                qrUrl: 'https://img.vietqr.io/image/TCB-0829028846-compact.png'
            },
            'bidv': {
                name: 'BIDV',
                stk: '8840293902',
                owner: 'HOANG MINH THANG',
                qrUrl: 'https://img.vietqr.io/image/BIDV-8840293902-compact.png'
            },
            // Thêm các ngân hàng khác vào đây
            'agribank': { 
                name: 'Agribank', 
                stk: '0829028846', 
                owner: 'HOANG MINH THANG', 
                qrUrl: 'https://img.vietqr.io/image/VBA-0829028846-compact.png' 
            },
            'mbbank': { 
                name: 'MB Bank', 
                stk: '0829028846', 
                owner: 'HOANG MINH THANG', 
                qrUrl: 'https://img.vietqr.io/image/MB-0829028846-compact.png' 
            },
            'acb': { 
                name: 'ACB', 
                stk: '0829028846', 
                owner: 'HOANG MINH THANG', 
                qrUrl: 'https://img.vietqr.io/image/ACB-0829028846-compact.png' 
            },
        };

        // Lấy các element
        const bankSelectionDiv = document.getElementById('bank-selection');
        const bankDetailsDiv = document.getElementById('bank-details');
        const pageTitle = document.getElementById('page-title');
        const pageSubtitle = document.getElementById('page-subtitle');
        
        // 2. Hàm khi chọn 1 ngân hàng
        function selectBank(bankKey) {
            const data = bankData[bankKey];
            if (!data) return; // Không tìm thấy data

            // 2.1. Điền dữ liệu vào các thẻ <span>
            document.getElementById('qr-code-img').src = data.qrUrl;
            document.getElementById('detail-bank-name').innerText = data.name;
            document.getElementById('detail-stk').innerText = data.stk;
            document.getElementById('detail-name').innerText = data.owner;
            // (Số tiền và nội dung là cố định, đã điền sẵn)
            
            // 2.2. Ẩn/Hiện các bước
            bankSelectionDiv.style.display = 'none';
            bankDetailsDiv.style.display = 'block';
            
            // 2.3. Đổi tiêu đề
            pageTitle.innerText = 'Thông tin Chuyển khoản';
            pageSubtitle.innerText = 'Quét mã QR hoặc sao chép thông tin';
        }
        
        // 3. Hàm khi bấm "Quay lại"
        function goBackToSelection() {
            bankSelectionDiv.style.display = 'block';
            bankDetailsDiv.style.display = 'none';
            
            // Đổi lại tiêu đề
            pageTitle.innerText = 'Chọn Ngân hàng';
            pageSubtitle.innerText = 'Vui lòng chọn ngân hàng bạn muốn chuyển đến';
        }

        // 4. Hàm Copy (Giữ nguyên)
        function copyToClipboard(elementId, typeName) {
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = document.getElementById(elementId).innerText;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextArea);
            alert('Đã sao chép ' + typeName + ': ' + tempTextArea.value);
        }

    </script>

</body>
</html>